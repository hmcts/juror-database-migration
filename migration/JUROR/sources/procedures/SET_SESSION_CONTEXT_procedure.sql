-- Generated by Ora2Pg, the Oracle database Schema converter, version 24.0
-- Copyright 2000-2023 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=172.17.0.5;sid=xe;port=1521

SET client_encoding TO 'UTF8';

SET search_path = "JUROR",public;
\set ON_ERROR_STOP ON

PROCEDURE SET_SESSION_CONTEXT(p_LocCode varchar2, p_clear_context varchar2 default 'N' ) IS


 l_context_id varchar2(3);
/******************************************************************************
   NAME:       SET_SESSION_CONTEXT
   PURPOSE:    To set context for the oracle session.

   REVISIONS:
   Ver        Date        Author           Description
   ---------  ----------  ---------------  ------------------------------------
   1.0        17/08/2005      Jeeva Konar   1. Created this procedure.
   1.1        15/09/2005	Jeeva Konar		2. Consolidated JUROR_SET_CONTEXT procedure into this procedure.
   1.2	  	  04/10/2005	Jeeva Konar		3. Changed the datatype of variable to varchar2
   1.3	  	  14/10/2005	Jeeva Konar		4. Introduced setting of client identifier to that of context value
   			  					  			   This is done to help support staff to identify what was context was set for the session.
											   This value can be found in V$SESSION under  column CLIENT_IDENTIFIER.
   1.4        18/11/2005    Jeeva Konar		5. Introduced code to unsetting context


   PARAMETERS:
   INPUT:
   OUTPUT:
   RETURNED VALUE:
   CALLED BY:
   CALLS:
   EXAMPLE USE:     SET_SESSION_CONTEXT;
   ASSUMPTIONS:
   LIMITATIONS:
   ALGORITHM:
   NOTES:

******************************************************************************/
BEGIN

 IF p_clear_context = 'Y' THEN
   DBMS_SESSION.CLEAR_CONTEXT('JUROR_APP');
 ELSE
   SELECT context_id
   INTO	  l_context_id
   FROM	  context_data
   WHERE  loc_code = p_LocCode;


  DBMS_SESSION.SET_CONTEXT('JUROR_APP','OWNER',l_context_id);
  DBMS_SESSION.SET_IDENTIFIER(l_context_id);
 END IF;

EXCEPTION
     WHEN NO_DATA_FOUND THEN
       raise_application_error( -20001, 'Invalid Location Code. Session Context not set' );
     when others then
     	   raise;

END SET_SESSION_CONTEXT;

