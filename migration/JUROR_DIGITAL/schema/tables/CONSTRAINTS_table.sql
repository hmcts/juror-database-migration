-- Generated by Ora2Pg, the Oracle database Schema converter, version 24.0
-- Copyright 2000-2023 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.0.0.5;sid=xe;port=1521

SET client_encoding TO 'UTF8';

\set ON_ERROR_STOP ON

SET search_path = juror_digital,public;
ALTER TABLE app_settings ADD PRIMARY KEY (setting);
ALTER TABLE bureau_auth ALTER COLUMN USERNAME SET NOT NULL;
ALTER TABLE bureau_auth ALTER COLUMN LOGINATTEMPTS SET NOT NULL;
ALTER TABLE change_log ADD PRIMARY KEY (id);
ALTER TABLE change_log_item ADD PRIMARY KEY (id);
ALTER TABLE contact_log_ext ADD PRIMARY KEY (part_no,start_call);
ALTER TABLE contact_log_ext ALTER COLUMN REPEAT_ENQUIRY SET NOT NULL;
ALTER TABLE coroner_pool_ext ADD PRIMARY KEY (cor_pool_no);
ALTER TABLE coroner_pool_ext ALTER COLUMN EMAIL SET NOT NULL;
ALTER TABLE court_region ADD PRIMARY KEY (region_id);
ALTER TABLE court_region ADD UNIQUE (region_name);
ALTER TABLE court_region ALTER COLUMN REGION_ID SET NOT NULL;
ALTER TABLE court_region ALTER COLUMN REGION_NAME SET NOT NULL;
ALTER TABLE court_whitelist ADD UNIQUE (loc_code);
ALTER TABLE court_whitelist ALTER COLUMN LOC_CODE SET NOT NULL;
ALTER TABLE expenses_rates ADD PRIMARY KEY (expense_type);
ALTER TABLE juror_response ADD PRIMARY KEY (juror_number);
ALTER TABLE juror_response ALTER COLUMN JUROR_NUMBER SET NOT NULL;
ALTER TABLE juror_response ALTER COLUMN DATE_RECEIVED SET NOT NULL;
ALTER TABLE juror_response ALTER COLUMN RESIDENCY SET NOT NULL;
ALTER TABLE juror_response ALTER COLUMN MENTAL_HEALTH_ACT SET NOT NULL;
ALTER TABLE juror_response ALTER COLUMN BAIL SET NOT NULL;
ALTER TABLE juror_response ALTER COLUMN CONVICTIONS SET NOT NULL;
ALTER TABLE juror_response_cjs_employment ADD PRIMARY KEY (id);
ALTER TABLE juror_response_cjs_employment ALTER COLUMN JUROR_NUMBER SET NOT NULL;
ALTER TABLE juror_response_cjs_employment ALTER COLUMN CJS_EMPLOYER SET NOT NULL;
ALTER TABLE juror_response_cjs_employment ALTER COLUMN CJS_EMPLOYER_DETAILS SET NOT NULL;
ALTER TABLE juror_response_special_needs ADD PRIMARY KEY (id);
ALTER TABLE juror_response_special_needs ALTER COLUMN JUROR_NUMBER SET NOT NULL;
ALTER TABLE juror_response_special_needs ALTER COLUMN SPEC_NEED SET NOT NULL;
ALTER TABLE juror_response_special_needs ALTER COLUMN SPEC_NEED_DETAIL SET NOT NULL;
ALTER TABLE notify_template_field ADD PRIMARY KEY (id);
ALTER TABLE notify_template_field ALTER COLUMN DATABASE_FIELD SET NOT NULL;
ALTER TABLE notify_template_field ALTER COLUMN TEMPLATE_ID SET NOT NULL;
ALTER TABLE notify_template_field ALTER COLUMN TEMPLATE_FIELD SET NOT NULL;
ALTER TABLE notify_template_mapping ADD UNIQUE (template_name);
ALTER TABLE notify_template_mapping ADD PRIMARY KEY (template_id);
ALTER TABLE notify_template_mapping ALTER COLUMN NOTIFY_NAME SET NOT NULL;
ALTER TABLE notify_template_mapping ALTER COLUMN TEMPLATE_ID SET NOT NULL;
ALTER TABLE notify_template_mapping ALTER COLUMN TEMPLATE_NAME SET NOT NULL;
ALTER TABLE notify_template_field ADD CONSTRAINT ntf_template_id_fk FOREIGN KEY (template_id) REFERENCES notify_template_mapping;
ALTER TABLE paper_response ADD PRIMARY KEY (juror_number);
ALTER TABLE paper_response ALTER COLUMN JUROR_NUMBER SET NOT NULL;
ALTER TABLE paper_response ALTER COLUMN DATE_RECEIVED SET NOT NULL;
ALTER TABLE paper_response_cjs_employment ADD PRIMARY KEY (id);
ALTER TABLE paper_response_cjs_employment ALTER COLUMN JUROR_NUMBER SET NOT NULL;
ALTER TABLE paper_response_cjs_employment ALTER COLUMN CJS_EMPLOYER SET NOT NULL;
ALTER TABLE paper_response_special_needs ADD PRIMARY KEY (id);
ALTER TABLE paper_response_special_needs ALTER COLUMN JUROR_NUMBER SET NOT NULL;
ALTER TABLE paper_response_special_needs ALTER COLUMN SPEC_NEED SET NOT NULL;
ALTER TABLE pool_extend ADD PRIMARY KEY (part_no);
ALTER TABLE pool_member_ext ADD PRIMARY KEY (part_no,pool_no,owner);
ALTER TABLE pool_request_ext ADD PRIMARY KEY (pool_no);
ALTER TABLE pool_request_ext ALTER COLUMN TOTAL_NO_REQUIRED SET NOT NULL;
ALTER TABLE region_notify_template ADD PRIMARY KEY (region_template_id);
ALTER TABLE region_notify_template ALTER COLUMN REGION_TEMPLATE_ID SET NOT NULL;
ALTER TABLE staff ADD PRIMARY KEY (login);
ALTER TABLE staff_audit ADD PRIMARY KEY (action,editor_login,created);
ALTER TABLE staff_juror_response_audit ADD PRIMARY KEY (team_leader_login,juror_number,date_received,created);
ALTER TABLE staff_juror_response_audit ALTER COLUMN TEAM_LEADER_LOGIN SET NOT NULL;
ALTER TABLE staff_juror_response_audit ALTER COLUMN JUROR_NUMBER SET NOT NULL;
ALTER TABLE staff_juror_response_audit ALTER COLUMN DATE_RECEIVED SET NOT NULL;
ALTER TABLE staff_juror_response_audit ALTER COLUMN STAFF_ASSIGNMENT_DATE SET NOT NULL;
ALTER TABLE staff_juror_response_audit ALTER COLUMN CREATED SET NOT NULL;
ALTER TABLE stats_auto_processed ADD PRIMARY KEY (processed_date);
ALTER TABLE stats_auto_processed ALTER COLUMN PROCESSED_DATE SET NOT NULL;
ALTER TABLE stats_deferrals ADD PRIMARY KEY (bureau_or_court,exec_code,calendar_year,financial_year,week);
ALTER TABLE stats_deferrals ALTER COLUMN BUREAU_OR_COURT SET NOT NULL;
ALTER TABLE stats_deferrals ALTER COLUMN EXEC_CODE SET NOT NULL;
ALTER TABLE stats_deferrals ALTER COLUMN CALENDAR_YEAR SET NOT NULL;
ALTER TABLE stats_deferrals ALTER COLUMN FINANCIAL_YEAR SET NOT NULL;
ALTER TABLE stats_deferrals ALTER COLUMN WEEK SET NOT NULL;
ALTER TABLE stats_deferrals ALTER COLUMN EXCUSAL_COUNT SET NOT NULL;
ALTER TABLE stats_excusals ADD PRIMARY KEY (bureau_or_court,exec_code,calendar_year,financial_year,week);
ALTER TABLE stats_excusals ALTER COLUMN BUREAU_OR_COURT SET NOT NULL;
ALTER TABLE stats_excusals ALTER COLUMN EXEC_CODE SET NOT NULL;
ALTER TABLE stats_excusals ALTER COLUMN CALENDAR_YEAR SET NOT NULL;
ALTER TABLE stats_excusals ALTER COLUMN FINANCIAL_YEAR SET NOT NULL;
ALTER TABLE stats_excusals ALTER COLUMN WEEK SET NOT NULL;
ALTER TABLE stats_excusals ALTER COLUMN EXCUSAL_COUNT SET NOT NULL;
ALTER TABLE stats_not_responded ADD PRIMARY KEY (summons_month,loc_code);
ALTER TABLE stats_not_responded ALTER COLUMN LOC_CODE SET NOT NULL;
ALTER TABLE stats_not_responded ALTER COLUMN SUMMONS_MONTH SET NOT NULL;
ALTER TABLE stats_response_times ADD PRIMARY KEY (summons_month,response_month,response_period,loc_code,response_method);
ALTER TABLE stats_response_times ALTER COLUMN LOC_CODE SET NOT NULL;
ALTER TABLE stats_response_times ALTER COLUMN RESPONSE_METHOD SET NOT NULL;
ALTER TABLE stats_response_times ALTER COLUMN RESPONSE_MONTH SET NOT NULL;
ALTER TABLE stats_response_times ALTER COLUMN RESPONSE_PERIOD SET NOT NULL;
ALTER TABLE stats_response_times ALTER COLUMN SUMMONS_MONTH SET NOT NULL;
ALTER TABLE stats_thirdparty_online ADD PRIMARY KEY (summons_month);
ALTER TABLE stats_thirdparty_online ALTER COLUMN SUMMONS_MONTH SET NOT NULL;
ALTER TABLE stats_unprocessed_responses ADD PRIMARY KEY (loc_code);
ALTER TABLE stats_unprocessed_responses ALTER COLUMN LOC_CODE SET NOT NULL;
ALTER TABLE stats_welsh_online_responses ADD PRIMARY KEY (summons_month);
ALTER TABLE stats_welsh_online_responses ALTER COLUMN SUMMONS_MONTH SET NOT NULL;
ALTER TABLE survey_response ADD PRIMARY KEY (id,survey_id);
ALTER TABLE survey_response ALTER COLUMN ID SET NOT NULL;
ALTER TABLE survey_response ALTER COLUMN SURVEY_ID SET NOT NULL;
ALTER TABLE team ADD UNIQUE (team_name);
ALTER TABLE team ADD PRIMARY KEY (id);
ALTER TABLE team ALTER COLUMN TEAM_NAME SET NOT NULL;
ALTER TABLE voters ADD PRIMARY KEY (loc_code,part_no);
ALTER TABLE voters ALTER COLUMN ADDRESS SET NOT NULL;
ALTER TABLE voters ALTER COLUMN FNAME SET NOT NULL;
ALTER TABLE voters ALTER COLUMN LNAME SET NOT NULL;
-- ALTER TABLE schema_version ADD PRIMARY KEY (installed_rank);
-- ALTER TABLE schema_version ALTER COLUMN installed_rank SET NOT NULL;
-- ALTER TABLE schema_version ALTER COLUMN description SET NOT NULL;
-- ALTER TABLE schema_version ALTER COLUMN type SET NOT NULL;
-- ALTER TABLE schema_version ALTER COLUMN script SET NOT NULL;
-- ALTER TABLE schema_version ALTER COLUMN installed_by SET NOT NULL;
-- ALTER TABLE schema_version ALTER COLUMN installed_on SET NOT NULL;
-- ALTER TABLE schema_version ALTER COLUMN execution_time SET NOT NULL;
-- ALTER TABLE schema_version ALTER COLUMN success SET NOT NULL;
