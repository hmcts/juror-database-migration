-- Generated by Ora2Pg, the Oracle database Schema converter, version 24.0
-- Copyright 2000-2023 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=172.17.0.3;sid=xe;port=1521

SET client_encoding TO 'UTF8';

SET search_path = juror_digital_user,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW bureau_juror_detail (loc_code, loc_name, loc_court_name, loc_address1, loc_address2, loc_address3, loc_address4, loc_address5, loc_address6, loc_zip, loc_attend_time, part_no, title, fname, lname, address, address2, address3, address4, address5, address6, zip, next_date, ret_date, status, phone_number, alt_phone_number, dob, read_only, pool_no, notes, email, new_title, new_first_name, new_last_name, new_address, new_address2, new_address3, new_address4, new_address5, new_address6, new_zip, date_received, processing_status, new_phone_number, new_alt_phone_number, new_dob, new_email, thirdparty_fname, thirdparty_lname, thirdparty_reason, thirdparty_other_reason, main_phone, other_phone, email_address, relationship, residency, residency_detail, mental_health_act, mental_health_act_details, bail, bail_details, convictions, convictions_details, deferral_reason, deferral_date, special_needs_arrangements, excusal_reason, processing_complete, completed_at, version, juror_email_details, juror_phone_details, staff_login, staff_assignment_date, urgent, super_urgent, welsh) AS SELECT
    C.LOC_CODE,
    C.LOC_NAME,
    C.LOC_COURT_NAME,
    C.LOC_ADDRESS1,
    C.LOC_ADDRESS2,
    C.LOC_ADDRESS3,
    C.LOC_ADDRESS4,
    C.LOC_ADDRESS5,
    C.LOC_ADDRESS6,
    C.LOC_ZIP,
    C.LOC_ATTEND_TIME,
    P.PART_NO,
    P.TITLE,
    P.FNAME,
    P.LNAME,
    P.ADDRESS,
    P.ADDRESS2,
    P.ADDRESS3,
    P.ADDRESS4,
    P.ADDRESS5,
    P.ADDRESS6,
    P.ZIP,
    P.NEXT_DATE,
    P.RET_DATE,        -- this is the only addition from V3_10__COMPLETION_DATE
    P.STATUS,
    P.H_PHONE          AS PHONE_NUMBER,
    P.M_PHONE          AS ALT_PHONE_NUMBER,
    P.DOB,
    P.READ_ONLY,
    P.POOL_NO,
    P.NOTES,
    P.H_EMAIL          AS EMAIL,
    R.TITLE            AS NEW_TITLE,
    R.FIRST_NAME       AS NEW_FIRST_NAME,
    R.LAST_NAME        AS NEW_LAST_NAME,
    R.ADDRESS          AS NEW_ADDRESS,
    R.ADDRESS2         AS NEW_ADDRESS2,
    R.ADDRESS3         AS NEW_ADDRESS3,
    R.ADDRESS4         AS NEW_ADDRESS4,
    R.ADDRESS5         AS NEW_ADDRESS5,
    R.ADDRESS6         AS NEW_ADDRESS6,
    R.ZIP              AS NEW_ZIP,
    R.DATE_RECEIVED,
    R.PROCESSING_STATUS,
    R.PHONE_NUMBER     AS NEW_PHONE_NUMBER,
    R.ALT_PHONE_NUMBER AS NEW_ALT_PHONE_NUMBER,
    R.DATE_OF_BIRTH    AS NEW_DOB,
    R.EMAIL            AS NEW_EMAIL,
    R.THIRDPARTY_FNAME,
    R.THIRDPARTY_LNAME,
    R.THIRDPARTY_REASON,
    R.THIRDPARTY_OTHER_REASON,
    R.MAIN_PHONE,
    R.OTHER_PHONE,
    R.EMAIL_ADDRESS,
    R.RELATIONSHIP,
    R.RESIDENCY,
    R.RESIDENCY_DETAIL,
    R.MENTAL_HEALTH_ACT,
    R.MENTAL_HEALTH_ACT_DETAILS,
    R.BAIL,
    R.BAIL_DETAILS,
    R.CONVICTIONS,
    R.CONVICTIONS_DETAILS,
    R.DEFERRAL_REASON,
    R.DEFERRAL_DATE,
    R.SPECIAL_NEEDS_ARRANGEMENTS,
    R.EXCUSAL_REASON,
    R.PROCESSING_COMPLETE,
    R.COMPLETED_AT,
    R.VERSION,
    R.JUROR_EMAIL_DETAILS,
    R.JUROR_PHONE_DETAILS,
    R.STAFF_LOGIN,
    R.STAFF_ASSIGNMENT_DATE,
    R.URGENT,
    R.SUPER_URGENT,
    R.WELSH
  FROM
    JUROR.COURT_LOCATION C,
    JUROR_DIGITAL.JUROR_RESPONSE R,
    JUROR.POOL P
  WHERE
    P.OWNER = '400'
    AND P.IS_ACTIVE = 'Y'
    AND P.LOC_CODE = C.LOC_CODE
    AND R.JUROR_NUMBER = P.PART_NO;

